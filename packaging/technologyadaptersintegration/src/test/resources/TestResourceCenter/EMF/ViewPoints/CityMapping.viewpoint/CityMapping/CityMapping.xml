<?xml version="1.0" encoding="UTF-8"?>
<VirtualModel id="1" modelVersion="1.0" name="CityMapping">
  <EditionPattern id="2" name="City">
    <CreationScheme id="3" name="creation" label="creation" skipConfirmationPanel="false" definePopupDefaultSize="false" width="800" height="600">
      <IndividualParameter id="4" conceptURI="http://www.thalesgroup.com/openflexo/emf/model/city1/City" conceptValue="" name="cityInModel1" label="cityInModel1" defaultValue="" usePaletteLabelAsDefaultValue="false" conditional="" isRequired="false">
        <AddressedEMFModelSlot id="5" isRequired="true" isReadOnly="false" metaModelURI="http://www.thalesgroup.com/openflexo/emf/model/city1" name="model1" />
      </IndividualParameter>
      <IndividualParameter id="6" conceptURI="http://www.thalesgroup.com/openflexo/emf/model/city2/City" conceptValue="" name="cityInModel2" label="cityInModel2" defaultValue="" usePaletteLabelAsDefaultValue="false" conditional="" isRequired="false">
        <AddressedEMFModelSlot id="7" isRequired="true" isReadOnly="false" metaModelURI="http://www.thalesgroup.com/openflexo/emf/model/city2" name="model2" />
      </IndividualParameter>
      <DeclarePatternRole id="8" object="parameters.cityInModel1" conditional="" assignation="cityInModel1" />
      <DeclarePatternRole id="9" object="parameters.cityInModel2" conditional="" assignation="cityInModel2" />
    </CreationScheme>
    <ActionScheme id="10" conditional="(cityInModel2 = null)" name="generateModel2FromModel1" label="generateModel2FromModel1" skipConfirmationPanel="true" definePopupDefaultSize="false" width="800" height="600">
      <AddEMFObjectIndividual id="11" conditional="" assignation="" individualName="" ontologyClassURI="http://www.thalesgroup.com/openflexo/emf/model/city2/City">
        <AddressedEMFModelSlot idref="7" />
        <DataPropertyAssertion id="12" dataPropertyURI="http://www.thalesgroup.com/openflexo/emf/model/city2/City/name" value="cityInModel1.name" conditional="" />
      </AddEMFObjectIndividual>
    </ActionScheme>
    <ContainedEMFObjectIndividualPatternRole id="13" patternRole="cityInModel1" name="cityInModel1" ontologicType="http://www.thalesgroup.com/openflexo/emf/model/city1/City">
      <AddressedEMFModelSlot idref="5" />
    </ContainedEMFObjectIndividualPatternRole>
    <ContainedEMFObjectIndividualPatternRole id="14" patternRole="cityInModel2" name="cityInModel2" ontologicType="http://www.thalesgroup.com/openflexo/emf/model/city2/City">
      <AddressedEMFModelSlot idref="7" />
    </ContainedEMFObjectIndividualPatternRole>
    <PrimaryConceptEMFObjectIndividualPatternRole idref="13" />
    <Inspector id="15" inspectorTitle="City" />
    <Constraint id="16" constraint="(cityInModel1.name.toUpperCase = cityInModel2.name.toUpperCase)" />
  </EditionPattern>
  <EditionPattern id="17" name="House">
    <Inspector id="18" inspectorTitle="House" />
  </EditionPattern>
  <EditionPattern id="19" name="Appartment" parentEditionPattern="http://www.thalesgroup.com/openflexo/emf/CityMapping/CityMapping#House">
    <CreationScheme id="20" name="creation" label="creation" skipConfirmationPanel="false" definePopupDefaultSize="false" width="800" height="600">
      <IndividualParameter id="21" conceptURI="http://www.thalesgroup.com/openflexo/emf/model/city1/House" conceptValue="" name="houseInModel1" label="houseInModel1" defaultValue="" usePaletteLabelAsDefaultValue="false" conditional="" isRequired="false">
        <AddressedEMFModelSlot idref="5" />
      </IndividualParameter>
      <IndividualParameter id="22" conceptURI="http://www.thalesgroup.com/openflexo/emf/model/city2/Appartment" conceptValue="" name="appartmentInModel2" label="appartmentInModel2" defaultValue="" usePaletteLabelAsDefaultValue="false" conditional="" isRequired="false">
        <AddressedEMFModelSlot idref="7" />
      </IndividualParameter>
      <DeclarePatternRole id="23" object="parameters.houseInModel1" conditional="" name="" assignation="houseInModel1" />
      <DeclarePatternRole id="24" object="parameters.appartmentInModel2" conditional="" assignation="appartmentInModel2" />
    </CreationScheme>
    <ContainedEMFObjectIndividualPatternRole id="25" patternRole="houseInModel1" name="houseInModel1" ontologicType="http://www.thalesgroup.com/openflexo/emf/model/city1/House">
      <AddressedEMFModelSlot idref="5" />
    </ContainedEMFObjectIndividualPatternRole>
    <ContainedEMFObjectIndividualPatternRole id="26" patternRole="appartmentInModel2" name="appartmentInModel2" ontologicType="http://www.thalesgroup.com/openflexo/emf/model/city2/Appartment">
      <AddressedEMFModelSlot idref="7" />
    </ContainedEMFObjectIndividualPatternRole>
    <PrimaryConceptEMFObjectIndividualPatternRole idref="25" />
    <Inspector id="27" inspectorTitle="Appartment" />
    <Constraint id="28" constraint="(houseInModel1.type.name = &quot;Appartment&quot;)" />
    <Constraint id="29" constraint="(houseInModel1.info = appartmentInModel2.label)" />
  </EditionPattern>
  <EditionPattern id="30" name="Mansion" parentEditionPattern="http://www.thalesgroup.com/openflexo/emf/CityMapping/CityMapping#House">
    <ContainedEMFObjectIndividualPatternRole id="31" patternRole="houseInModel1" name="houseInModel1" ontologicType="http://www.thalesgroup.com/openflexo/emf/model/city1/House">
      <AddressedEMFModelSlot idref="5" />
    </ContainedEMFObjectIndividualPatternRole>
    <ContainedEMFObjectIndividualPatternRole id="32" patternRole="mansionInModel2" name="mansionInModel2" ontologicType="http://www.thalesgroup.com/openflexo/emf/model/city2/Mansion">
      <AddressedEMFModelSlot idref="7" />
    </ContainedEMFObjectIndividualPatternRole>
    <PrimaryConceptEMFObjectIndividualPatternRole idref="31" />
    <Inspector id="33" inspectorTitle="Mansion" />
    <Constraint id="34" constraint="(houseInModel1.type.name = &quot;Mansion&quot;)" />
    <Constraint id="35" constraint="(houseInModel1.info = mansionInModel2.number.toString)" />
  </EditionPattern>
  <EditionPattern id="36" name="Resident">
    <ContainedEMFObjectIndividualPatternRole id="37" patternRole="residentInModel1" name="residentInModel1" ontologicType="http://www.thalesgroup.com/openflexo/emf/model/city1/Resident">
      <AddressedEMFModelSlot idref="5" />
    </ContainedEMFObjectIndividualPatternRole>
    <ContainedEMFObjectIndividualPatternRole id="38" patternRole="houseInModel2" name="houseInModel2" ontologicType="http://www.thalesgroup.com/openflexo/emf/model/city2/House">
      <AddressedEMFModelSlot idref="7" />
    </ContainedEMFObjectIndividualPatternRole>
    <PrimaryConceptEMFObjectIndividualPatternRole idref="37" />
    <Inspector id="39" inspectorTitle="Resident" />
    <Constraint id="40" constraint="(residentInModel1.name = houseInModel2.owner)" />
  </EditionPattern>
  <EditionPattern id="41" name="Mayor" parentEditionPattern="http://www.thalesgroup.com/openflexo/emf/CityMapping/CityMapping#Resident">
    <Inspector id="42" inspectorTitle="Mayor" />
  </EditionPattern>
  <LocalizedDictionary id="43" />
  <EMFModelSlot idref="5" />
  <EMFModelSlot idref="7" />
  <SynchronizationScheme id="44" conditional="" name="synchronization" label="synchronization" skipConfirmationPanel="false" definePopupDefaultSize="false" width="800" height="600">
    <FetchRequestIterationAction id="45" iteratorName="city1" conditional="">
      <AddressedSelectEMFObjectIndividual id="46" ontologyClassURI="http://www.thalesgroup.com/openflexo/emf/model/city1/City" conditional="" assignation="">
        <AddressedEMFModelSlot idref="5" />
      </AddressedSelectEMFObjectIndividual>
      <AddressedEMFModelSlot idref="5" />
      <SelectEMFObjectIndividual id="47" ontologyClassURI="http://www.thalesgroup.com/openflexo/emf/model/city2/City" conditional="" variableName="matchingCitiesInModel2" assignation="matchingCitiesInModel2">
        <Condition id="48" condition="(selected.name.toUpperCase = city1.name.toUpperCase)" />
        <AddressedEMFModelSlot idref="7" />
      </SelectEMFObjectIndividual>
      <ConditionalAction id="49" condition="(matchingCitiesInModel2.size = 0)" conditional="">
        <MatchEditionPatternInstance id="50" virtualModelInstance="this" creationSchemeURI="http://www.thalesgroup.com/openflexo/emf/CityMapping/CityMapping#City.creation" conditional="" assignation="">
          <MatchingCriteria id="51" patternRoleName="cityInModel1" value="city1" />
          <MatchingCriteria id="52" patternRoleName="cityInModel2" value="null" />
          <CreateEditionPatternInstanceParameter id="53" paramName="cityInModel1" value="city1" />
          <CreateEditionPatternInstanceParameter id="54" paramName="cityInModel2" value="null" />
        </MatchEditionPatternInstance>
      </ConditionalAction>
      <ConditionalAction id="55" condition="(matchingCitiesInModel2.size = 1)" conditional="">
        <MatchEditionPatternInstance id="56" virtualModelInstance="this" creationSchemeURI="http://www.thalesgroup.com/openflexo/emf/CityMapping/CityMapping#City.creation" conditional="" assignation="">
          <MatchingCriteria id="57" patternRoleName="cityInModel1" value="city1" />
          <MatchingCriteria id="58" patternRoleName="cityInModel2" value="matchingCitiesInModel2.get(0)" />
          <CreateEditionPatternInstanceParameter id="59" paramName="cityInModel1" value="city1" />
          <CreateEditionPatternInstanceParameter id="60" paramName="cityInModel2" value="matchingCitiesInModel2.get(0)" />
        </MatchEditionPatternInstance>
      </ConditionalAction>
      <FetchRequestIterationAction id="61" iteratorName="house1" conditional="">
        <AddressedSelectEMFObjectIndividual id="62" ontologyClassURI="http://www.thalesgroup.com/openflexo/emf/model/city1/House" conditional="" assignation="">
          <AddressedEMFModelSlot idref="5" />
        </AddressedSelectEMFObjectIndividual>
        <AddressedEMFModelSlot idref="5" />
        <ConditionalAction id="63" condition="(house1.type.name = &quot;Appartment&quot;)" conditional="">
          <SelectEMFObjectIndividual id="64" ontologyClassURI="http://www.thalesgroup.com/openflexo/emf/model/city2/Appartment" conditional="" variableName="matchingAppartmentsInModel2" assignation="matchingAppartmentsInModel2">
            <Condition id="65" condition="(selected.label = house1.info)" />
            <AddressedEMFModelSlot idref="7" />
          </SelectEMFObjectIndividual>
          <ConditionalAction id="66" condition="(matchingAppartmentsInModel2.size = 0)" conditional="">
            <MatchEditionPatternInstance id="67" virtualModelInstance="this" creationSchemeURI="http://www.thalesgroup.com/openflexo/emf/CityMapping/CityMapping#Appartment.creation" conditional="" assignation="">
              <MatchingCriteria id="68" patternRoleName="houseInModel1" value="house1" />
              <MatchingCriteria id="69" patternRoleName="appartmentInModel2" value="null" />
              <CreateEditionPatternInstanceParameter id="70" paramName="houseInModel1" value="house1" />
              <CreateEditionPatternInstanceParameter id="71" paramName="appartmentInModel2" value="null" />
            </MatchEditionPatternInstance>
          </ConditionalAction>
          <ConditionalAction id="72" condition="(matchingAppartmentsInModel2.size = 1)" conditional="">
            <MatchEditionPatternInstance id="73" virtualModelInstance="this" creationSchemeURI="http://www.thalesgroup.com/openflexo/emf/CityMapping/CityMapping#Appartment.creation" conditional="" assignation="">
              <MatchingCriteria id="74" patternRoleName="houseInModel1" value="house1" />
              <MatchingCriteria id="75" patternRoleName="appartmentInModel2" value="matchingAppartmentsInModel2.get(0)" />
              <CreateEditionPatternInstanceParameter id="76" paramName="houseInModel1" value="house1" />
              <CreateEditionPatternInstanceParameter id="77" paramName="appartmentInModel2" value="matchingAppartmentsInModel2.get(0)" />
            </MatchEditionPatternInstance>
          </ConditionalAction>
        </ConditionalAction>
      </FetchRequestIterationAction>
    </FetchRequestIterationAction>
  </SynchronizationScheme>
  <ActionScheme id="78" conditional="" name="synchronizeModel2FromModel1" label="Synchronize model2 from model 1" skipConfirmationPanel="false" definePopupDefaultSize="false" width="800" height="600">
    <SelectEditionPatternInstance id="79" editionPatternTypeURI="http://www.thalesgroup.com/openflexo/emf/CityMapping/CityMapping#City" conditional="" variableName="nonExistantCitiesInModel2" assignation="nonExistantCitiesInModel2">
      <Condition id="80" condition="(selected.cityInModel2 = null)" />
    </SelectEditionPatternInstance>
    <IterationAction id="81" iteration="nonExistantCitiesInModel2" iteratorName="nonExistantCity" conditional="">
      <ExecutionAction id="82" execution="nonExistantCity.generateModel2FromModel1()" conditional="" assignation="" />
    </IterationAction>
  </ActionScheme>
  <Inspector id="83" inspectorTitle="CityMapping" />
</VirtualModel>
